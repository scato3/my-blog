---
title: React가 렌더링을 하는 과정
date: 2024-11-15
description: 리액트 업데이트 과정의 내부를 파헤쳐보자
thumbnailUrl: /posts/thumbnail/icon-react.png
---

![](/posts/thumbnail/icon-react.png)

<h3 className="text-center">
  리액트가 렌더링을 하는 과정에 대한 포스팅입니다.
</h3>

### 리액트를 사용하기 전

#### DOM을 직접 조작

리액트 이전에는 DOM을 직접 다루는 방식이 일반적이었습니다. 개발자는 다음과 같은 방식으로 UI를 업데이트했습니다:

    - DOM 요소를 선택 (document.querySelector)
    - 새로운 값을 설정하거나 속성을 업데이트 (element.innerHTML, element.setAttribute)
    - 이벤트 핸들러를 직접 등록 및 제거 (addEventListener, removeEventListener)

리액트는 사용자의 인터페이스를 효율적으로 업데이트하기 위해 매우 정교한 프로세스를 가지고 있습니다. 이 글에서는 리액트가 렌더링을 수행하는 과정을 분석해보겠습니다.

## 1. 변경사항 감지: 리액트가 디핑(디프) 체크를 수행

리액트는 <strong>Virtual DOM(VDOM)</strong>을 사용하여 효율적으로 UI를 업데이트합니다. 컴포넌트에서 state나 props가 변경되면 리액트는 이전 상태의 VDOM과 새로운 상태의 VDOM을 비교하는 작업, 즉 디핑(diffing)을 수행합니다.
이 과정에서 어떤 부분이 변경되었는지 최소한의 연산으로 감지하며, DOM을 직접 조작하지 않고 가상 객체를 사용해 변경사항을 확인하는 것이 리액트의 강점입니다.

## 2. 작업 분할: 리액트 파이버(Fiber) 구조의 등장

변경사항이 감지되면 리액트는 이를 처리하기 위해 변경 사항을 작은 단위로 나눕니다. 이때 사용하는 구조가 바로 <strong>리액트 파이버(Fiber)</strong>입니다.
리액트 파이버는 작업을 나누고 우선순위를 지정할 수 있는 "작업 관리 시스템"입니다.

리액트는 이 변경사항을 잘게 쪼개고, 재조정(Reconciliation) 과정을 통해 DOM을 최적화합니다.
이 과정에서 리액트의 <strong>스케줄러(Scheduler)</strong>가 중요한 역할을 합니다.
스케줄러는 작업의 우선순위를 지정하며 중요한 작업과 덜 중요한 작업을 구분합니다.
이벤트 핸들러, state, props의 변경은 <strong>Batching</strong>으로 묶여 처리됩니다. 즉, 여러 변경 사항을 하나의 작업으로 결합해 효율성을 높입니다.

## 3. 우선순위 처리: Fiber 노드에서 우선순위별로 작업 수행

작업은 이제 Fiber 노드에 저장됩니다. Fiber 노드는 리액트 컴포넌트와 연결된 데이터 구조로, 작업의 상태와 우선순위를 기록합니다. 작업은 MessageChannel을 통해 분배됩니다.

## 4. 시간 관리: 1 프레임 내에서 작업 분배

리액트는 렌더링 작업을 1프레임(16.6ms) 내에서 처리하려고 합니다.
브라우저는 1초에 약 60번의 프레임을 그릴 수 있습니다(60fps). 따라서 리액트는 각 프레임 내에서 가능한 많은 작업을 완료하지만, 시간이 부족하면 작업을 다음 프레임으로 넘깁니다.

이 과정은 CPU와 메모리의 부담을 줄이고, 사용자가 부드럽고 응답성 좋은 인터페이스를 경험할 수 있도록 도와줍니다.

## 5. 5. 커밋 단계: 최종 업데이트를 UI에 반영

모든 작업이 완료되고 리액트가 변경사항을 확정하면 커밋(commit) 단계가 시작됩니다. 커밋 단계에서 리액트는 다음과 같은 작업을 수행합니다.

    - DOM을 실제로 업데이트
    - useEffect와 같은 후처리 작업(side-effects) 실행
    - 컴포넌트가 화면에 나타나거나 사라질 때, 라이프사이클 메서드(e.g., componentDidMount, componentWillUnmount) 호출

이 과정에서 화면은 최종적으로 업데이트되고, 사용자에게 최신 UI를 보여줍니다.
